/**
 * STATISTICO UNIVERSAL POPUP STYLES
 * ==================================
 * 
 * ROBUST STANDARD BASED ON OUTLIERS VIEW
 * 
 * CRITICAL PRINCIPLES:
 * 1. Maximum display in 14" screens and up
 * 2. Automatic vertical scrollbar when content overflows
 * 3. Charts remain full-sized and readable
 * 
 * ARCHITECTURE:
 * - #resultsContent gets automatic height constraint
 * - All container divs scroll naturally when content is too tall
 * - NO MANUAL CLASSES NEEDED - just include this CSS!
 * 
 * USAGE:
 * <link rel="stylesheet" href="./shared/views/universal-popup-styles.css">
 * <div class="your-container">...</div>
 */

/* ========================================
   MAIN RESULTS CONTENT - Auto Height
   ======================================== */

#resultsContent {
  display: flex !important;
  flex-direction: column !important;
  height: 100% !important;
  max-height: calc(100vh - 180px) !important; /* Account for header/footer */
  min-height: 400px !important;
  overflow-y: auto !important;  /* AUTO SCROLL */
  overflow-x: hidden !important;
  position: relative !important;
  padding: 16px !important;
}

/* ========================================
   SCROLLBAR STYLING - Consistent & Visible
   ======================================== */

/* Firefox */
#resultsContent {
  scrollbar-width: thin !important;
  scrollbar-color: rgba(120,200,255,0.5) rgba(255,255,255,0.1) !important;
}

/* Webkit (Chrome, Edge, Safari) */
#resultsContent::-webkit-scrollbar {
  width: 12px !important;
  display: block !important;
}

#resultsContent::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.08) !important;
  border-radius: 6px !important;
  margin: 4px 0 !important;
}

#resultsContent::-webkit-scrollbar-thumb {
  background: rgba(120,200,255,0.4) !important;
  border-radius: 6px !important;
  border: 2px solid rgba(26,31,46,1) !important;
  min-height: 40px !important; /* Minimum thumb size */
}

#resultsContent::-webkit-scrollbar-thumb:hover {
  background: rgba(120,200,255,0.6) !important;
}

#resultsContent::-webkit-scrollbar-thumb:active {
  background: rgba(120,200,255,0.8) !important;
}

/* ========================================
   RESPONSIVE HEIGHT ADJUSTMENTS
   ======================================== */

/* 14" laptops and up (1366x768, 1920x1080) */
@media (min-height: 800px) {
  #resultsContent {
    max-height: calc(100vh - 180px) !important;
  }
}

/* 13" laptops (1280x720, 1366x768 smaller) */
@media (max-height: 800px) {
  #resultsContent {
    max-height: calc(100vh - 150px) !important;
  }
}

/* Smaller displays */
@media (max-height: 700px) {
  #resultsContent {
    max-height: calc(100vh - 120px) !important;
    padding: 12px !important;
  }
}

/* Mobile/tablet */
@media (max-height: 600px) {
  #resultsContent {
    max-height: calc(100vh - 100px) !important;
    padding: 8px !important;
  }
}

/* ========================================
   CHART CONTAINERS - Full Size
   ======================================== */

/* Ensure charts don't get compressed */
#resultsContent > div[class*="-container"] {
  min-height: min-content !important;
  width: 100% !important;
}

/* Chart divs should maintain their size */
div[id*="chart"],
div[id*="Chart"],
div[class*="chart-container"],
div[class*="chart-panel"] {
  min-height: 400px !important;
  width: 100% !important;
}

/* ========================================
   PANEL STRUCTURE - Natural Flow
   ======================================== */

/* Panels stack naturally, no forced height */
div[class*="-panel"] {
  margin-bottom: 16px !important;
  flex-shrink: 0 !important; /* Don't compress panels */
}

/* Last panel has no bottom margin */
div[class*="-panel"]:last-child {
  margin-bottom: 0 !important;
}

/* Panel bodies contain content naturally */
div[class*="panel-body"] {
  padding: 16px !important;
  min-height: min-content !important;
}

/* ========================================
   GRID LAYOUTS - Stacked Vertically
   ======================================== */

/* Charts stacked vertically for better layout */
div[class*="-grid"],
div[class*="charts-grid"] {
  display: flex !important;
  flex-direction: column !important;
  gap: 16px !important;
  margin-bottom: 16px !important;
}

/* ========================================
   COMPACT MODE - Short Displays
   ======================================== */

@media (max-height: 700px) {
  div[class*="-panel"] {
    margin-bottom: 12px !important;
  }
  
  div[class*="panel-heading"] {
    padding: 8px 12px !important;
    font-size: 0.95rem !important;
  }
  
  div[class*="panel-body"] {
    padding: 12px !important;
  }
}

@media (max-height: 600px) {
  div[class*="-panel"] {
    margin-bottom: 8px !important;
  }
  
  div[class*="panel-heading"] {
    padding: 6px 10px !important;
    font-size: 0.9rem !important;
  }
  
  div[class*="panel-body"] {
    padding: 8px !important;
  }
  
  div[id*="chart"],
  div[id*="Chart"] {
    min-height: 300px !important; /* Smaller charts on tiny screens */
  }
}

/* ========================================
   STATS PANELS - Compact
   ======================================== */

div[class*="stats-panel"],
div[class*="stats-grid"] {
  flex-shrink: 0 !important;
  margin-bottom: 16px !important;
}

/* ========================================
   CONTROLS - Stay Visible
   ======================================== */

div[class*="controls"],
div[class*="-controls-"] {
  flex-shrink: 0 !important; /* Never compress controls */
  margin-bottom: 12px !important;
  z-index: 10 !important;
}

/* ========================================
   PRINT STYLES
   ======================================== */

@media print {
  #resultsContent {
    max-height: none !important;
    overflow: visible !important;
    padding: 0 !important;
  }
  
  div[class*="-panel"] {
    page-break-inside: avoid !important;
  }
}

/* ========================================
   DEBUGGING (Uncomment to visualize)
   ======================================== */

/* 
#resultsContent {
  outline: 2px solid red !important;
}

div[class*="-container"] {
  outline: 2px solid blue !important;
}

div[id*="chart"] {
  outline: 2px solid green !important;
}
*/
