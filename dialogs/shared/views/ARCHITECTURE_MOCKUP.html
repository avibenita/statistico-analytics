<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Histogram Analysis - Statistico MOCKUP</title>
  
  <!-- Highcharts for testing -->
  <script src="https://code.highcharts.com/highcharts.js"></script>
  
  <style>
    /* ========================================
       INLINE CSS FOR TESTING
       (Will be split into separate files)
       ======================================== */
    
    :root {
      --surface-0: #0c1624;
      --surface-1: #1a1f2e;
      --surface-2: #242938;
      --border: #2d3748;
      --accent-1: rgb(255,165,120);
      --accent-2: rgb(120,200,255);
      --text-primary: #ffffff;
      --text-secondary: rgba(255,255,255,0.8);
      --text-muted: rgba(255,255,255,0.6);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--surface-0);
      color: var(--text-primary);
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* HEADER */
    .statistico-header {
      background: var(--surface-1);
      padding: 16px;
      border-bottom: 2px solid var(--border);
      flex-shrink: 0;
    }

    .statistico-header h1 {
      margin: 0;
      font-size: 1.5rem;
      color: var(--accent-1);
    }

    .statistico-header p {
      margin: 4px 0 0 0;
      font-size: 0.95rem;
      color: var(--text-secondary);
    }

    /* MAIN CONTENT - SCROLLABLE */
    .statistico-content {
      flex: 1;
      padding: 16px;
      overflow-y: auto;
      overflow-x: hidden;
    }

    /* SCROLLBAR STYLING */
    .statistico-content::-webkit-scrollbar {
      width: 12px;
    }

    .statistico-content::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.08);
      border-radius: 6px;
    }

    .statistico-content::-webkit-scrollbar-thumb {
      background: rgba(120,200,255,0.4);
      border-radius: 6px;
      border: 2px solid var(--surface-0);
    }

    .statistico-content::-webkit-scrollbar-thumb:hover {
      background: rgba(120,200,255,0.6);
    }

    /* STATS PANEL */
    .stats-panel {
      background: var(--surface-1);
      border-radius: 8px;
      border: 1px solid var(--border);
      margin-bottom: 16px;
      overflow: hidden;
    }

    .panel-heading {
      background: var(--surface-2);
      padding: 12px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border);
    }

    .panel-heading span {
      font-weight: 600;
      font-size: 1rem;
      color: var(--accent-2);
    }

    .controls {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .controls label {
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .controls select {
      background: var(--surface-0);
      color: var(--text-primary);
      border: 1px solid var(--border);
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
    }

    /* STATS TABLES */
    .stats-grid {
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .stats-table {
      width: 100%;
      border-collapse: collapse;
    }

    .stats-table th,
    .stats-table td {
      padding: 8px 12px;
      text-align: center;
      border-bottom: 1px solid var(--border);
    }

    .stats-table th {
      background: var(--surface-2);
      color: var(--text-muted);
      font-weight: 600;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .stats-table td {
      font-size: 0.95rem;
      color: var(--text-primary);
      font-weight: 500;
    }

    /* HISTOGRAM PANEL */
    .histogram-panel {
      background: var(--surface-1);
      border-radius: 8px;
      border: 1px solid var(--border);
      padding: 16px;
    }

    .histogram-controls {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      margin-bottom: 16px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border);
    }

    .control-group {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .control-group label {
      font-size: 0.9rem;
      color: var(--text-secondary);
      white-space: nowrap;
    }

    .control-group input[type="number"],
    .control-group select {
      background: var(--surface-0);
      color: var(--text-primary);
      border: 1px solid var(--border);
      padding: 6px 10px;
      border-radius: 4px;
      font-size: 0.9rem;
    }

    .control-group input[type="checkbox"] {
      width: 16px;
      height: 16px;
      cursor: pointer;
    }

    .control-group button {
      background: var(--accent-2);
      color: var(--text-primary);
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 600;
    }

    .control-group button:hover {
      opacity: 0.9;
    }

    /* CHART CONTAINER */
    .chart-container {
      min-height: 400px;
      width: 100%;
      background: var(--surface-2);
      border-radius: 6px;
      padding: 8px;
    }

    /* FOOTER */
    .statistico-footer {
      background: var(--surface-1);
      padding: 12px 16px;
      border-top: 2px solid var(--border);
      text-align: right;
      flex-shrink: 0;
    }

    .btn-close {
      background: linear-gradient(135deg, var(--accent-1), rgb(255,140,90));
      color: white;
      border: none;
      padding: 10px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      box-shadow: 0 2px 8px rgba(255,165,120,0.3);
    }

    .btn-close:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(255,165,120,0.4);
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
      .histogram-controls {
        flex-direction: column;
        gap: 12px;
      }
      
      .control-group {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="statistico-header">
    <h1 id="analysisTitle">Interactive Histogram - MOCKUP</h1>
    <p id="variableInfo">
      <span id="variableName">Horsepower</span> 
      <span id="sampleSize">(n=369)</span>
    </p>
  </header>
  
  <!-- MAIN CONTENT AREA -->
  <main id="resultsContent" class="statistico-content">
    
    <!-- STATISTICS PANEL -->
    <section class="stats-panel">
      <div class="panel-heading">
        <span>Descriptive Statistics</span>
        <div class="controls">
          <label for="decimalsSelect">Decimals:</label>
          <select id="decimalsSelect" onchange="updateDecimals()">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2" selected>2</option>
            <option value="3">3</option>
            <option value="4">4</option>
          </select>
        </div>
      </div>
      
      <div class="stats-grid">
        <table class="stats-table">
          <thead>
            <tr>
              <th>Count</th>
              <th>Average</th>
              <th>Std Dev</th>
              <th>Variance</th>
              <th>Kurtosis</th>
              <th>Skewness</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td id="stat-count">369</td>
              <td id="stat-mean">201.17</td>
              <td id="stat-stddev">60.64</td>
              <td id="stat-variance">3677.17</td>
              <td id="stat-kurtosis">1.19</td>
              <td id="stat-skewness">0.77</td>
            </tr>
          </tbody>
        </table>
        
        <table class="stats-table">
          <thead>
            <tr>
              <th>Range</th>
              <th>Minimum</th>
              <th>Q25</th>
              <th>Median</th>
              <th>Q75</th>
              <th>Maximum</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td id="stat-range">404.00</td>
              <td id="stat-min">73.00</td>
              <td id="stat-q1">160.00</td>
              <td id="stat-median">200.00</td>
              <td id="stat-q3">230.00</td>
              <td id="stat-max">477.00</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
    
    <!-- HISTOGRAM PANEL -->
    <section class="histogram-panel">
      <div class="histogram-controls">
        <div class="control-group">
          <label for="binningMethod">Binning:</label>
          <select id="binningMethod" onchange="updateHistogram()">
            <option value="manual" selected>Manual</option>
            <option value="sturges">Sturges</option>
            <option value="scott">Scott</option>
            <option value="fd">Freedman-Diaconis</option>
          </select>
        </div>
        
        <div class="control-group">
          <label for="numBins">Bins:</label>
          <input type="number" id="numBins" value="10" min="1" max="50" onchange="updateHistogram()">
        </div>
        
        <div class="control-group">
          <input type="checkbox" id="showNormalCurve" checked onchange="updateHistogram()">
          <label for="showNormalCurve">Show Normal Curve</label>
        </div>
        
        <div class="control-group">
          <button onclick="updateHistogram()">Refresh Chart</button>
        </div>
      </div>
      
      <div id="histogram-chart" class="chart-container"></div>
    </section>
    
  </main>
  
  <!-- FOOTER -->
  <footer class="statistico-footer">
    <button class="btn-close" onclick="alert('Close button clicked! In real app, this closes the dialog.')">Close</button>
  </footer>
  
  <!-- INLINE JAVASCRIPT FOR TESTING -->
  <script>
    // Sample data (Horsepower from mtcars dataset)
    const sampleData = [
      201, 185, 195, 210, 180, 190, 200, 220, 240, 160,
      170, 180, 195, 205, 215, 225, 235, 155, 165, 175,
      185, 195, 205, 215, 225, 150, 160, 170, 180, 190,
      200, 210, 220, 230, 240, 145, 155, 165, 175, 185,
      195, 205, 215, 225, 235, 140, 150, 160, 170, 180,
      190, 200, 210, 220, 230, 135, 145, 155, 165, 175,
      185, 195, 205, 215, 225, 130, 140, 150, 160, 170,
      180, 190, 200, 210, 220, 125, 135, 145, 155, 165,
      175, 185, 195, 205, 215, 120, 130, 140, 150, 160,
      170, 180, 190, 200, 210, 115, 125, 135, 145, 155
    ];
    
    // Generate more realistic data
    function generateNormalData(n, mean, stddev) {
      const data = [];
      for (let i = 0; i < n; i++) {
        // Box-Muller transform
        const u1 = Math.random();
        const u2 = Math.random();
        const z = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);
        data.push(mean + z * stddev);
      }
      return data;
    }
    
    const testData = generateNormalData(369, 201.17, 60.64);
    
    let histogramChart = null;
    
    // Initialize on load
    window.addEventListener('DOMContentLoaded', () => {
      console.log('âœ… Mockup loaded successfully!');
      createHistogram();
    });
    
    // Create histogram
    function createHistogram() {
      const numBins = parseInt(document.getElementById('numBins').value);
      const showNormal = document.getElementById('showNormalCurve').checked;
      
      const min = Math.min(...testData);
      const max = Math.max(...testData);
      const binWidth = (max - min) / numBins;
      
      const bins = new Array(numBins).fill(0);
      const categories = [];
      
      // Calculate bins
      for (let i = 0; i < numBins; i++) {
        const binStart = min + i * binWidth;
        const binEnd = binStart + binWidth;
        categories.push(`${binStart.toFixed(0)}-${binEnd.toFixed(0)}`);
        
        bins[i] = testData.filter(v => v >= binStart && v < binEnd).length;
      }
      
      const series = [{
        name: 'Frequency',
        type: 'column',
        data: bins,
        color: '#4a90e2',
        borderColor: '#2a5f9e',
        borderWidth: 1
      }];
      
      // Add normal curve if checked
      if (showNormal) {
        const mean = testData.reduce((a, b) => a + b, 0) / testData.length;
        const stdDev = Math.sqrt(testData.reduce((sum, v) => sum + Math.pow(v - mean, 2), 0) / testData.length);
        
        const normalData = [];
        const step = (max - min) / 100;
        for (let x = min; x <= max; x += step) {
          const y = (1 / (stdDev * Math.sqrt(2 * Math.PI))) * 
                    Math.exp(-0.5 * Math.pow((x - mean) / stdDev, 2));
          normalData.push([x, y * testData.length * binWidth]);
        }
        
        series.push({
          name: 'Normal Distribution',
          type: 'spline',
          data: normalData,
          color: '#f39c12',
          lineWidth: 2,
          marker: { enabled: false },
          yAxis: 0
        });
      }
      
      // Create chart
      histogramChart = Highcharts.chart('histogram-chart', {
        chart: {
          backgroundColor: '#242938',
          style: { fontFamily: 'Segoe UI' }
        },
        title: {
          text: 'Histogram Distribution',
          style: { color: '#ffffff' }
        },
        xAxis: {
          categories: categories,
          labels: {
            rotation: -45,
            style: { color: '#ffffff' }
          },
          title: {
            text: 'Value Range',
            style: { color: '#78c8ff' }
          }
        },
        yAxis: {
          title: {
            text: 'Frequency',
            style: { color: '#78c8ff' }
          },
          labels: { style: { color: '#ffffff' } },
          gridLineColor: '#2d3748'
        },
        legend: {
          itemStyle: { color: '#ffffff' }
        },
        plotOptions: {
          column: {
            groupPadding: 0,
            pointPadding: 0,
            borderWidth: 1
          }
        },
        series: series,
        credits: { enabled: false }
      });
      
      console.log('âœ… Chart created with', numBins, 'bins');
    }
    
    // Update histogram
    function updateHistogram() {
      console.log('ðŸ”„ Updating histogram...');
      createHistogram();
    }
    
    // Update decimals
    function updateDecimals() {
      const decimals = parseInt(document.getElementById('decimalsSelect').value);
      console.log('Updated decimals to:', decimals);
      // In real app, would reformat all statistics
      alert(`Decimals set to ${decimals}. In real app, all stats would be reformatted.`);
    }
  </script>
</body>
</html>
